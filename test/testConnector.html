<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>---</title>
<style type="text/css">
#canvas {
	border: 1px solid #000;
	box-shadow: 0 1px 5px #777;
}
</style>

<script type="text/Javascript" src="../src/org.xiha.html5.bootstrap.js"></script>
<script type="text/Javascript">
	request('org.xiha.html5.core');
	request('org.xiha.html5.core.node')
	request('org.xiha.html5.core.scene');
	request('org.xiha.html5.core.cube');
	request('org.xiha.html5.core.arccube');

	request('org.xiha.html5.core.connector');
	request('org.xiha.html5.core.scene.ext');
</script>

</head>

<body>
	<div>
		<canvas id="canvas" width="800" height="600"> </canvas>
	</div>
	<script language="Javascript">
		var canvas = document.getElementById("canvas");

		var scene = new org.xiha.html5.core.Scene(canvas, 1);
		var maxnum = 5;

		var x = Math.floor(200);
		var y = Math.floor(200);
		//var p = new org.xiha.html5.core.NormalPoint(x, y);
		var circle = new org.xiha.html5.core.Arccube(scene, null, 100, 40, 99);
		circle.r = 10;
		var fillStyle = 'hsl(' + Math.floor(360 * Math.random()) + ', '
				+ Math.floor(Math.random() * 100) + '%, '
				+ Math.floor(Math.random() * 100) + '%)';
		circle.setFillStyle(fillStyle);
		circle.clickEnable = true;
		circle.enableMoving();

		var cube1 = createCube(1);
		var cube2 = createCube(2);
		var cube3 = createCube(3);
		var cube4 = createCube(4);
		var cube5 = createCube(5);
		var cube6 = createCube(6);

		var cube7 = createCube(7);
		var cube8 = createCube(8);
		var cube9 = createCube(9);
		var cube10 = createCube(10);
		var cube11 = createCube(11);
		var cube12 = createCube(12);
		var cube13 = createCube(13);
		//开始构造结点以及关联关系
		var node = new org.xiha.html5.core.Node(cube1, null, null);
		var node2 = new org.xiha.html5.core.Node(cube2, cube1, null);
		node.addChild(node2);
		node2.addChild(new org.xiha.html5.core.Node(circle, cube2, null));
		node2.addChild(new org.xiha.html5.core.Node(cube10, cube2, null));
		node2.addChild(new org.xiha.html5.core.Node(cube11, cube2, null));
		node2.addChild(new org.xiha.html5.core.Node(cube12, cube2, null));
		node2.addChild(new org.xiha.html5.core.Node(cube13, cube2, null));

		node.addChild(new org.xiha.html5.core.Node(cube3, cube1, null));
		node.addChild(new org.xiha.html5.core.Node(cube4, cube1, null));
		node.addChild(new org.xiha.html5.core.Node(cube5, cube1, null));
		var node6 = new org.xiha.html5.core.Node(cube6, cube1, null);
		node.addChild(node6);
		node6.addChild(new org.xiha.html5.core.Node(cube7, cube6, null));
		node6.addChild(new org.xiha.html5.core.Node(cube8, cube6, null));
		node6.addChild(new org.xiha.html5.core.Node(cube9, cube6, null));

		scene.setRootNode(node, new org.xiha.html5.core.NodeUtil(100));
		scene.ready();
		//scene.gravity(2);
		function createCube(i) {

			var size = 20;
			//var x = Math.floor(Math.random() * 800);
			//var y = Math.floor(Math.random() * 600);
			//var p = new org.xiha.html5.core.NormalPoint(x, y);
			var cube = new org.xiha.html5.core.Cube(scene, null, size, size,
					i + 1);
			var fillStyle = 'hsl(' + Math.floor(360 * Math.random()) + ', '
					+ Math.floor(Math.random() * 100) + '%, '
					+ Math.floor(Math.random() * 100) + '%)';
			cube.setFillStyle(fillStyle);
			cube.clickEnable = true;
			cube.enableMoving();

			return cube;
		}
	</script>

</body>
</html>
